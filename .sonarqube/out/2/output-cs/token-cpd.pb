¯
©C:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\HostingExtensions.cs
	namespace 	
IdentityServerAPI
 
; 
internal 
static	 
class 
HostingExtensions '
{ 
public 
static 
WebApplication 
ConfigureServices /
(0 1
this1 5!
WebApplicationBuilder6 K
builderL S
)S T
{ 
builder

 	
.

	 

Services


 
.

 
AddIdentityServer

 $
(

$ %
)

% &
.  
AddInMemoryApiScopes 
( 
Config  
.  !
	ApiScopes! *
)+ ,
. 
AddInMemoryClients 
( 
Config 
. 
Clients &
)' (
. 
AddTestUsers 
( 
Config 
. 
Users 
)  
. (
AddInMemoryIdentityResources 
(  
Config! '
.' (
IdentityResources( 9
): ;
;; <
return 
builder	 
. 
Build 
( 
) 
; 
} 
public 
static 
WebApplication 
ConfigurePipeline /
(0 1
this1 5
WebApplication6 D
appE H
)H I
{ 
app 
. $
UseSerilogRequestLogging 
( 
)  
;  !
if 
( 
app 	
.	 

Environment
 
. 
IsDevelopment #
(# $
)$ %
)% &
{ 
app 
. %
UseDeveloperExceptionPage  
(  !
)! "
;" #
} 
app 
. 
UseIdentityServer 
( 
) 
; 
return 
app	 
; 
} 
} Ü
ŸC:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\Program.cs
Log 
. 
Logger 

= 
new 
LoggerConfiguration $
($ %
)% &
. 
WriteTo 	
.	 

Console
 
( 
) 
. !
CreateBootstrapLogger 
( 
) 
; 
Log 
. 
Information 
( 
$str 
)  
;  !
try

 
{ 
var 
builder 
= 
WebApplication 
. 
CreateBuilder +
(+ ,
args- 1
)2 3
;3 4
builder 
. 	
Host	 
. 

UseSerilog 
( 
( 
ctx 
, 
lc  "
)" #
=>$ &
lc' )
. 
WriteTo 

.
 
Console 
( 
outputTemplate "
:" #
$str	$ †
)
‡ ˆ
. 
Enrich 	
.	 

FromLogContext
 
( 
) 
. 
ReadFrom 
. 
Configuration 
( 
ctx 
. 
Configuration ,
)- .
)/ 0
;0 1
var 
app 
=	 

builder 
. 
ConfigureServices 
( 
) 
. 
ConfigurePipeline 
( 
) 
; 
app 
. 
Run 
( 	
)	 

;
 
} 
catch 
( 
	Exception 
ex 
) 
{ 
Log 
. 
Fatal 

(
 
ex 
, 
$str %
)& '
;' (
} 
finally 
{ 
Log 
. 
Information 
( 
$str &
)' (
;( )
Log   
.   
CloseAndFlush   
(   
)   
;   
}!! ð(
žC:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\Config.cs
	namespace 	
IdentityServerAPI
 
; 
public 
static 
class 
Config 
{ 
public

 
static

 
IEnumerable

 
<

 
ApiScope

 #
>

# $
	ApiScopes

% .
=>

/ 1
new 
[ 
] 
{ 
new 
ApiScope 
( 
$str 
, 
$str $
)$ %
{ 

UserClaims 
= 
{ 
$str 
, 
$str &
}' (
} 
, 
new 
ApiScope 
( 
$str 
, 
$str *
)* +
{ 

UserClaims 
= 
{ 
$str 
, 
$str &
}' (
} 
} 
; 
public 
static 
IEnumerable 
< 
Client !
>! "
Clients# *
=>+ -
new 
Client 
[ 
] 
{ 
new 
Client 
{ 
ClientId 
= 
$str 
, 
AllowedGrantTypes 
= 

GrantTypes "
." #!
ResourceOwnerPassword# 8
,8 9
ClientSecrets 
= 
{   
new!! 
Secret!!	 
(!! 
$str!! 
.!! 
Sha256!! 
(!!  
)!!  !
)!!! "
}"" 
,"" 
AllowedScopes$$ 
=$$ 
{$$ 
$str$$ 
,$$  
$str$$! 1
,$$1 2
$str$$2 9
,$$9 :
$str$$; H
}$$I J
,$$J K
AllowOfflineAccess%% 
=%% 
true%% 
}&& 
}'' 
;'' 
public-- 
static-- 
IEnumerable-- 
<-- 
IdentityResource-- +
>--+ ,
IdentityResources--- >
=>--? A
new--B E
[--E F
]--F G
{.. 
new// 
IdentityResources// 
.// 
OpenId// 
(// 
)//  
,//  !
new00 
IdentityResources00 
.00 
Profile00 
(00  
)00  !
,00! "
new11 
IdentityResource11 
(11 
$str11 
,11 
$str11  .
,11. /
new110 3
[113 4
]114 5
{116 7
$str118 >
}11? @
)11@ A
,11A B
new22 
IdentityResource22 
(22 
$str22 $
,22$ %
$str22& 6
,226 7
new228 ;
[22; <
]22< =
{22> ?
$str22@ L
}22M N
)22N O
}33 
;33 
public44 
static44 
List44 
<44 
TestUser44 
>44 
Users44 #
=>44$ &
new55 
List55 	
<55	 

TestUser55
 
>55 
{66 
new77 
TestUser77 
{88 
	SubjectId99 
=99 
$str99 6
,996 7
Username:: 
=:: 
$str:: 
,:: 
Password;; 
=;; 
$str;; 
,;; 
Claims<< 

=<< 
new<< 
List<< 
<<< 
Claim<< 
><< 
{== 
new>> 
Claim>>	 
(>> 
$str>> 
,>> 
$str>>  
)>>  !
,>>! "
new?? 
Claim??	 
(?? 
$str?? 
,?? 
$str?? #
)??# $
,??$ %
new@@ 
Claim@@	 
(@@ 
$str@@ 
,@@ 
$str@@ %
)@@% &
,@@& '
newAA 
ClaimAA	 
(AA 
$strAA 
,AA 
$strAA %
)AA% &
,AA& '
newBB 
ClaimBB	 
(BB 
$strBB 
,BB 
$strBB %
)BB% &
}CC 
}DD 
,DD 
newEE 
TestUserEE 
{FF 
	SubjectIdGG 
=GG 
$strGG 6
,GG6 7
UsernameHH 
=HH 
$strHH 
,HH 
PasswordII 
=II 
$strII 
,II 
ClaimsJJ 

=JJ 
newJJ 
ListJJ 
<JJ 
ClaimJJ 
>JJ 
{KK 
newLL 
ClaimLL	 
(LL 
$strLL 
,LL 
$strLL &
)LL& '
,LL' (
newMM 
ClaimMM	 
(MM 
$strMM 
,MM 
$strMM #
)MM# $
}NN 
}OO 
}PP 
;PP 
}QQ 