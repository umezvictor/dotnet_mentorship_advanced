Œ
ŸC:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\Program.cs
Log 
. 
Logger 

= 
new 
LoggerConfiguration $
($ %
)% &
. 
WriteTo 	
.	 

Console
 
( 
) 
. !
CreateBootstrapLogger 
( 
) 
; 
Log 
. 
Information 
( 
$str 
)  
;  !
try

 
{ 
var 
builder 
= 
WebApplication 
. 
CreateBuilder +
(+ ,
args- 1
)2 3
;3 4
builder 
. 	
Host	 
. 

UseSerilog 
( 
( 
ctx 
, 
lc  "
)" #
=>$ &
lc' )
. 
WriteTo 

.
 
Console 
( 
outputTemplate "
:" #
$str	$ †
)
‡ ˆ
. 
Enrich 	
.	 

FromLogContext
 
( 
) 
. 
ReadFrom 
. 
Configuration 
( 
ctx 
. 
Configuration ,
)- .
)/ 0
;0 1
var 
app 
=	 

builder 
. 
ConfigureServices 
( 
) 
. 
ConfigurePipeline 
( 
) 
; 
await 
app 

.
 
RunAsync 
( 
) 
; 
} 
catch 
( 
	Exception 
ex 
) 
{ 
Log 
. 
Fatal 

(
 
ex 
, 
$str %
)& '
;' (
} 
finally 
{ 
Log 
. 
Information 
( 
$str &
)' (
;( )
await   
Log   

.  
 
CloseAndFlushAsync   
(   
)   
;    
}!! ¯
©C:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\HostingExtensions.cs
	namespace 	
IdentityServerAPI
 
; 
internal 
static	 
class 
HostingExtensions '
{ 
public 
static 
WebApplication 
ConfigureServices /
(0 1
this1 5!
WebApplicationBuilder6 K
builderL S
)S T
{ 
builder

 	
.

	 

Services


 
.

 
AddIdentityServer

 $
(

$ %
)

% &
.  
AddInMemoryApiScopes 
( 
Config  
.  !
	ApiScopes! *
)+ ,
. 
AddInMemoryClients 
( 
Config 
. 
Clients &
)' (
. 
AddTestUsers 
( 
Config 
. 
Users 
)  
. (
AddInMemoryIdentityResources 
(  
Config! '
.' (
IdentityResources( 9
): ;
;; <
return 
builder	 
. 
Build 
( 
) 
; 
} 
public 
static 
WebApplication 
ConfigurePipeline /
(0 1
this1 5
WebApplication6 D
appE H
)H I
{ 
app 
. $
UseSerilogRequestLogging 
( 
)  
;  !
if 
( 
app 	
.	 

Environment
 
. 
IsDevelopment #
(# $
)$ %
)% &
{ 
app 
. %
UseDeveloperExceptionPage  
(  !
)! "
;" #
} 
app 
. 
UseIdentityServer 
( 
) 
; 
return 
app	 
; 
} 
} ¨+
žC:\Users\ChibuzorUmezuruike\Documents\Victor\.Net_Mentorship_Program_Advanced\DotnetAdvancedEcommerceProject\src\IdentityServerApi\IdentityServerAPI\Config.cs
	namespace 	
IdentityServerAPI
 
; 
public 
static 
class 
Config 
{		 
public 
static 
IEnumerable 
< 
ApiScope #
># $
	ApiScopes% .
=>/ 1
new 
[ 
] 
{ 
new 
ApiScope 
( 
$str 
, 
$str $
)$ %
{ 

UserClaims 
= 
{ 
$str 
, 
$str &
}' (
} 
, 
new 
ApiScope 
( 
$str 
, 
$str *
)* +
{ 

UserClaims 
= 
{ 
$str 
, 
$str &
}' (
} 
} 
; 
public 
static 
IEnumerable 
< 
Client !
>! "
Clients# *
=>+ -
new 
Client 
[ 
] 
{ 
new 
Client 
{ 
ClientId 
= 
$str 
, 
AllowedGrantTypes 
= 

GrantTypes "
." #!
ResourceOwnerPassword# 8
,8 9
ClientSecrets   
=   
{!! 
new"" 
Secret""	 
("" 
$str"" 
."" 
Sha256"" 
(""  
)""  !
)""! "
}## 
,## 
AllowedScopes%% 
=%% 
{%% 
$str%% 
,%%  
$str%%! 1
,%%1 2
$str%%2 9
,%%9 :
$str%%; H
}%%I J
,%%J K
AllowOfflineAccess&& 
=&& 
true&& 
}'' 
}(( 
;(( 
public** 
static** 
IEnumerable** 
<** 
IdentityResource** +
>**+ ,
IdentityResources**- >
=>**? A
new**B E
[**E F
]**F G
{++ 
new,, 
IdentityResources,, 
.,, 
OpenId,, 
(,, 
),,  
,,,  !
new-- 
IdentityResources-- 
.-- 
Profile-- 
(--  
)--  !
,--! "
new.. 
IdentityResource.. 
(.. 
$str.. 
,.. 
$str..  .
,... /
new..0 3
[..3 4
]..4 5
{..6 7
$str..8 >
}..? @
)..@ A
,..A B
new// 
IdentityResource// 
(// 
$str// $
,//$ %
$str//& 6
,//6 7
new//8 ;
[//; <
]//< =
{//> ?
AppConstants//@ L
.//L M
PermissionClaim//M \
}//] ^
)//^ _
}00 
;00 
public11 
static11 
List11 
<11 
TestUser11 
>11 
Users11 #
=>11$ &
new22 
List22 	
<22	 

TestUser22
 
>22 
{33 
new44 
TestUser44 
{55 
	SubjectId66 
=66 
$str66 6
,666 7
Username77 
=77 
$str77 
,77 
Password88 
=88 
$str88 
,88 
Claims99 

=99 
new99 
List99 
<99 
Claim99 
>99 
{:: 
new;; 
Claim;;	 
(;; 
$str;; 
,;; 
$str;;  
);;  !
,;;! "
new<< 
Claim<<	 
(<< 
AppConstants<< 
.<< 
PermissionClaim<< +
,<<+ ,
$str<<- 3
)<<3 4
,<<4 5
new== 
Claim==	 
(== 
AppConstants== 
.== 
PermissionClaim== +
,==+ ,
$str==- 5
)==5 6
,==6 7
new>> 
Claim>>	 
(>> 
AppConstants>> 
.>> 
PermissionClaim>> +
,>>+ ,
$str>>- 5
)>>5 6
,>>6 7
new?? 
Claim??	 
(?? 
AppConstants?? 
.?? 
PermissionClaim?? +
,??+ ,
$str??- 5
)??5 6
}@@ 
}AA 
,AA 
newBB 
TestUserBB 
{CC 
	SubjectIdDD 
=DD 
$strDD 6
,DD6 7
UsernameEE 
=EE 
$strEE 
,EE 
PasswordFF 
=FF 
$strFF 
,FF 
ClaimsGG 

=GG 
newGG 
ListGG 
<GG 
ClaimGG 
>GG 
{HH 
newII 
ClaimII	 
(II 
$strII 
,II 
$strII &
)II& '
,II' (
newJJ 
ClaimJJ	 
(JJ 
AppConstantsJJ 
.JJ 
PermissionClaimJJ +
,JJ+ ,
$strJJ- 3
)JJ3 4
}KK 
}LL 
}MM 
;MM 
}NN 